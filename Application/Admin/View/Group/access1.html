<extend name="Public/base"/>
<block name="main">
	<div class="mainbar">

				<!-- Page heading -->
				<div class="page-head">
					<h2 class="pull-left"><i class="icon-calendar"></i>权限管理</h2>
					<!-- Breadcrumb -->
					<div class="bread-crumb pull-right">
						<a href=""><i class="icon-calendar"></i>权限管理</a>
						<!-- Divider -->
						<span class="divider">/</span>
						<a href="javascript:void(0)" class="bread-current">权限管理</a>
					</div>
					<div class="clearfix"></div>

				</div>
				<!-- Page heading ends -->

				<!-- Matter -->
				<div class="matter">
					<div class="container">
						<!-- Table -->
						<div class="row">
							<div class="col-md-12">
								<div class="widget">
									<div class="widget-head">								
										<div class="pull-left">
											
										</div>
										<div class="pull-right">
											<form class="navbar-form navbar-right" role="search">											
												<div class="form-group">
													<button onclick="window.open('{:U("insert")}')" type="button" class="btn btn-primary" style="width: 80px;"><i class="icon-plus"></i>&nbsp;添加</button>
												</div>
											</form>
										</div>
										<div class="clearfix"></div>
									</div>
									<div class="widget-content">
										<volist name="ruleList" id="rule1">
											<div class="panel panel-primary">
											  <div class="panel-heading">
											  	<label class="checkbox"><input type="checkbox" id="{$rule1['id']}" path="1">{$rule1['title']}</label>
											  </div>
											  <div class="panel-body">
											    <volist name="rule1.children" id="rule2">
											    	<label class="checkbox" style="margin-left:20px;"><input type="checkbox" id="{$rule2['id']}" top="{$rule1['id']}" path="2">{$rule2['title']}</label>
											    	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
													<volist name="rule2.children" id="rule3">
											    		<label class="checkbox-inline"><input type="checkbox" pid="{$rule2['id']}" top="{$rule1['id']}">{$rule3['title']}</label>
											    	</volist>
											    </volist>
											  </div>
											</div>
										</volist>
									</div>
								
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- Matter ends -->
			</div>

</block>
<block name="javascript">
<script type="text/javascript">
$(function() {
	$(':checkbox[id]').click(function() {
		var path=$(this).attr('path');
		var id=$(this).attr('id');
		var checked=$(this).prop('checked');
		if(path==1) {
			$(':checkbox[top='+id+']').prop('checked', checked);
		} else if(path==2) {
			$(':checkbox[pid='+id+']').prop('checked', checked);
		}
	});
})
</script>
</block>
